!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.AOS=e():t.AOS=e()}(this,function(){return function(o){function n(t){if(i[t])return i[t].exports;var e=i[t]={exports:{},id:t,loaded:!1};return o[t].call(e.exports,e,e.exports,n),e.loaded=!0,e.exports}var i={};return n.m=o,n.c=i,n.p="dist/",n(0)}([function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},r=n((n(o(1)),o(6))),a=n(o(7)),s=n(o(8)),u=n(o(9)),c=n(o(10)),d=n(o(11)),f=n(o(14)),l=[],h=!1,p=document.all&&!window.atob,m={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded"},v=function(){if(0<arguments.length&&void 0!==arguments[0]&&arguments[0]&&(h=!0),h)return l=(0,d.default)(l,m),(0,c.default)(l,m.once),l},g=function(){l=(0,f.default)(),v()};t.exports={init:function(t){return m=i(m,t),l=(0,f.default)(),!0===(e=m.disable)||"mobile"===e&&u.default.mobile()||"phone"===e&&u.default.phone()||"tablet"===e&&u.default.tablet()||"function"==typeof e&&!0===e()||p?void l.forEach(function(t,e){t.node.removeAttribute("data-aos"),t.node.removeAttribute("data-aos-easing"),t.node.removeAttribute("data-aos-duration"),t.node.removeAttribute("data-aos-delay")}):(document.querySelector("body").setAttribute("data-aos-easing",m.easing),document.querySelector("body").setAttribute("data-aos-duration",m.duration),document.querySelector("body").setAttribute("data-aos-delay",m.delay),"DOMContentLoaded"===m.startEvent&&-1<["complete","interactive"].indexOf(document.readyState)?v(!0):"load"===m.startEvent?window.addEventListener(m.startEvent,function(){v(!0)}):document.addEventListener(m.startEvent,function(){v(!0)}),window.addEventListener("resize",(0,a.default)(v,50,!0)),window.addEventListener("orientationchange",(0,a.default)(v,50,!0)),window.addEventListener("scroll",(0,r.default)(function(){(0,c.default)(l,m.once)},99)),document.addEventListener("DOMNodeRemoved",function(t){var e=t.target;e&&1===e.nodeType&&e.hasAttribute&&e.hasAttribute("data-aos")&&(0,a.default)(g,50,!0)}),(0,s.default)("[data-aos]",g),l);var e},refresh:v,refreshHard:g}},function(t,e){},,,,,function(m,t){(function(t){"use strict";function r(n,i,t){function r(t){var e=c,o=d;return c=d=void 0,m=t,l=n.apply(o,e)}function a(t){var e=t-p;return void 0===p||i<=e||e<0||g&&f<=t-m}function s(){var t,e,o=O();return a(o)?u(o):void(h=setTimeout(s,(e=i-((t=o)-p),g?x(e,f-(t-m)):e)))}function u(t){return h=void 0,o&&c?r(t):(c=d=void 0,l)}function e(){var t,e=O(),o=a(e);if(c=arguments,d=this,p=e,o){if(void 0===h)return m=t=p,h=setTimeout(s,i),v?r(t):l;if(g)return h=setTimeout(s,i),r(p)}return void 0===h&&(h=setTimeout(s,i)),l}var c,d,f,l,h,p,m=0,v=!1,g=!1,o=!0;if("function"!=typeof n)throw new TypeError(y);return i=w(i)||0,b(t)&&(v=!!t.leading,f=(g="maxWait"in t)?k(w(t.maxWait)||0,i):f,o="trailing"in t?!!t.trailing:o),e.cancel=function(){void 0!==h&&clearTimeout(h),c=p=d=h=void(m=0)},e.flush=function(){return void 0===h?l:u(O())},e}function b(t){var e=void 0===t?"undefined":o(t);return!!t&&("object"==e||"function"==e)}function n(t){return"symbol"==(void 0===t?"undefined":o(t))||!!(e=t)&&"object"==(void 0===e?"undefined":o(e))&&p.call(t)==a;var e}function w(t){if("number"==typeof t)return t;if(n(t))return i;if(b(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=b(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var o=c.test(t);return o||d.test(t)?f(t.slice(2),o?2:8):u.test(t)?i:+t}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y="Expected a function",i=NaN,a="[object Symbol]",s=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,d=/^0o[0-7]+$/i,f=parseInt,e="object"==(void 0===t?"undefined":o(t))&&t&&t.Object===Object&&t,l="object"==("undefined"==typeof self?"undefined":o(self))&&self&&self.Object===Object&&self,h=e||l||Function("return this")(),p=Object.prototype.toString,k=Math.max,x=Math.min,O=function(){return h.Date.now()};m.exports=function(t,e,o){var n=!0,i=!0;if("function"!=typeof t)throw new TypeError(y);return b(o)&&(n="leading"in o?!!o.leading:n,i="trailing"in o?!!o.trailing:i),r(t,e,{leading:n,maxWait:e,trailing:i})}}).call(t,function(){return this}())},function(p,t){(function(t){"use strict";function b(t){var e=void 0===t?"undefined":o(t);return!!t&&("object"==e||"function"==e)}function n(t){return"symbol"==(void 0===t?"undefined":o(t))||!!(e=t)&&"object"==(void 0===e?"undefined":o(e))&&h.call(t)==r;var e}function w(t){if("number"==typeof t)return t;if(n(t))return i;if(b(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=b(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var o=u.test(t);return o||c.test(t)?d(t.slice(2),o?2:8):s.test(t)?i:+t}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y="Expected a function",i=NaN,r="[object Symbol]",a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt,e="object"==(void 0===t?"undefined":o(t))&&t&&t.Object===Object&&t,f="object"==("undefined"==typeof self?"undefined":o(self))&&self&&self.Object===Object&&self,l=e||f||Function("return this")(),h=Object.prototype.toString,k=Math.max,x=Math.min,O=function(){return l.Date.now()};p.exports=function(n,i,t){function r(t){var e=c,o=d;return c=d=void 0,m=t,l=n.apply(o,e)}function a(t){var e=t-p;return void 0===p||i<=e||e<0||g&&f<=t-m}function s(){var t,e,o=O();return a(o)?u(o):void(h=setTimeout(s,(e=i-((t=o)-p),g?x(e,f-(t-m)):e)))}function u(t){return h=void 0,o&&c?r(t):(c=d=void 0,l)}function e(){var t,e=O(),o=a(e);if(c=arguments,d=this,p=e,o){if(void 0===h)return m=t=p,h=setTimeout(s,i),v?r(t):l;if(g)return h=setTimeout(s,i),r(p)}return void 0===h&&(h=setTimeout(s,i)),l}var c,d,f,l,h,p,m=0,v=!1,g=!1,o=!0;if("function"!=typeof n)throw new TypeError(y);return i=w(i)||0,b(t)&&(v=!!t.leading,f=(g="maxWait"in t)?k(w(t.maxWait)||0,i):f,o="trailing"in t?!!t.trailing:o),e.cancel=function(){void 0!==h&&clearTimeout(h),c=p=d=h=void(m=0)},e.flush=function(){return void 0===h?l:u(O())},e}}).call(t,function(){return this}())},function(t,e){"use strict";function o(){for(var t,e,o=0,n=u.length;o<n;o++){t=u[o];for(var i,r=0,a=(e=s.querySelectorAll(t.selector)).length;r<a;r++)(i=e[r]).ready||(i.ready=!0,t.fn.call(i,i))}}Object.defineProperty(e,"__esModule",{value:!0});var s=window.document,n=window.MutationObserver||window.WebKitMutationObserver,u=[],i=void 0;e.default=function(t,e){u.push({selector:t,fn:e}),!i&&n&&(i=new n(o)).observe(s.documentElement,{childList:!0,subtree:!0,removedNodes:!0}),o()}},function(t,e){"use strict";function o(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function n(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}}(),i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,r=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,s=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,[{key:"phone",value:function(){var t=o();return!(!i.test(t)&&!r.test(t.substr(0,4)))}},{key:"mobile",value:function(){var t=o();return!(!a.test(t)&&!s.test(t.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),t}();e.default=new u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,a){var s=window.pageYOffset,u=window.innerHeight;t.forEach(function(t,e){var o,n,i,r;n=u+s,i=a,r=(o=t).node.getAttribute("data-aos-once"),n>o.position?o.node.classList.add("aos-animate"):void 0!==r&&("false"===r||!i&&"true"!==r)&&o.node.classList.remove("aos-animate")})}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i=o(12),r=(n=i)&&n.__esModule?n:{default:n};e.default=function(t,o){return t.forEach(function(t,e){t.node.classList.add("aos-init"),t.position=(0,r.default)(t.node,o.offset)}),t}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i=o(13),a=(n=i)&&n.__esModule?n:{default:n};e.default=function(t,e){var o=0,n=0,i=window.innerHeight,r={offset:t.getAttribute("data-aos-offset"),anchor:t.getAttribute("data-aos-anchor"),anchorPlacement:t.getAttribute("data-aos-anchor-placement")};switch(r.offset&&!isNaN(r.offset)&&(n=parseInt(r.offset)),r.anchor&&document.querySelectorAll(r.anchor)&&(t=document.querySelectorAll(r.anchor)[0]),o=(0,a.default)(t).top,r.anchorPlacement){case"top-bottom":break;case"center-bottom":o+=t.offsetHeight/2;break;case"bottom-bottom":o+=t.offsetHeight;break;case"top-center":o+=i/2;break;case"bottom-center":o+=i/2+t.offsetHeight;break;case"center-center":o+=i/2+t.offsetHeight/2;break;case"top-top":o+=i;break;case"bottom-top":o+=t.offsetHeight+i;break;case"center-top":o+=t.offsetHeight/2+i}return r.anchorPlacement||r.offset||isNaN(e)||(n=e),o+n}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t){for(var e=0,o=0;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e+=t.offsetLeft-("BODY"!=t.tagName?t.scrollLeft:0),o+=t.offsetTop-("BODY"!=t.tagName?t.scrollTop:0),t=t.offsetParent;return{top:o,left:e}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t){t=t||document.querySelectorAll("[data-aos]");var o=[];return[].forEach.call(t,function(t,e){o.push({node:t})}),o}}])}),function(){"use strict";var c={};function f(t,e,o){for(var n=o.data,i=o.width,r=~~t.x,a=~~(t.x+t.width),s=~~t.y,u=~~(t.y+t.height),c=255*t.weight,d=s;d<u;d++)for(var f=r;f<a;f++){n[4*(d*i+f)+3]+=c}}function l(t,e,o){for(var n={detail:0,saturation:0,skin:0,boost:0,total:0},i=e.data,r=t.scoreDownSample,a=1/r,s=e.height*r,u=e.width*r,c=e.width,d=0;d<s;d+=r)for(var f=0;f<u;f+=r){var l=4*(~~(d*a)*c+~~(f*a)),h=m(t,o,f,d),p=i[l+1]/255;n.skin+=i[l]/255*(p+t.skinBias)*h,n.detail+=p*h,n.saturation+=i[l+2]/255*(p+t.saturationBias)*h,n.boost+=i[l+3]/255*h}return n.total=(n.detail*t.detailWeight+n.skin*t.skinWeight+n.saturation*t.saturationWeight+n.boost*t.boostWeight)/(o.width*o.height),n}function m(t,e,o,n){if(e.x>o||o>=e.x+e.width||e.y>n||n>=e.y+e.height)return t.outsideImportance;o=(o-e.x)/e.width,n=(n-e.y)/e.height;var i=2*v(.5-o),r=2*v(.5-n),a=Math.max(i-1+t.edgeRadius,0),s=Math.max(r-1+t.edgeRadius,0),u=(a*a+s*s)*t.edgeWeight,c=1.41-x(i*i+r*r);return t.ruleOfThirds&&(c+=1.2*Math.max(0,c+u+.5)*(b(i)+b(r))),c+u}function k(t,e,o){this.width=t,this.height=e,this.data=o?new Uint8ClampedArray(o):new Uint8ClampedArray(t*e*4)}function h(t,e){for(var o=t.data,n=t.width,i=Math.floor(t.width/e),r=Math.floor(t.height/e),a=new k(i,r),s=a.data,u=1/(e*e),c=0;c<r;c++)for(var d=0;d<i;d++){for(var f=4*(c*i+d),l=0,h=0,p=0,m=0,v=0,g=0,b=0;b<e;b++)for(var w=0;w<e;w++){var y=4*((c*e+b)*n+(d*e+w));l+=o[y],h+=o[y+1],p+=o[y+2],m+=o[y+3],v=Math.max(v,o[y]),g=Math.max(g,o[y+1])}s[f]=l*u*.5+.5*v,s[f+1]=h*u*.7+.3*g,s[f+2]=p*u,s[f+3]=m*u}return a}function e(t,e){var o=document.createElement("canvas");return o.width=t,o.height=e,o}function i(r){return{open:function(t){var e=t.naturalWidth||t.width,o=t.naturalHeight||t.height,n=r(e,o),i=n.getContext("2d");return!t.naturalWidth||t.naturalWidth==t.width&&t.naturalHeight==t.height?(n.width=t.width,n.height=t.height):(n.width=t.naturalWidth,n.height=t.naturalHeight),i.drawImage(t,0,0),c.Promise.resolve(n)},resample:function(t,o,n){return Promise.resolve(t).then(function(t){var e=r(~~o,~~n);return e.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,e.width,e.height),c.Promise.resolve(e)})},getData:function(t){return Promise.resolve(t).then(function(t){var e=t.getContext("2d").getImageData(0,0,t.width,t.height);return new k(t.width,t.height,e.data)})}}}c.Promise="undefined"!=typeof Promise?Promise:function(){throw new Error("No native promises and smartcrop.Promise not set.")},c.DEFAULTS={width:0,height:0,aspect:0,cropWidth:0,cropHeight:0,detailWeight:.2,skinColor:[.78,.57,.44],skinBias:.01,skinBrightnessMin:.2,skinBrightnessMax:1,skinThreshold:.8,skinWeight:1.8,saturationBrightnessMin:.05,saturationBrightnessMax:.9,saturationThreshold:.4,saturationBias:.2,saturationWeight:.1,scoreDownSample:8,step:8,scaleStep:.1,minScale:1,maxScale:1,edgeRadius:.4,edgeWeight:-20,outsideImportance:-.5,boostWeight:100,ruleOfThirds:!0,prescale:!0,imageOperations:null,canvasFactory:e,debug:!1},c.crop=function(t,e,a){var s=g({},c.DEFAULTS,e);s.aspect&&(s.width=s.aspect,s.height=1),null===s.imageOperations&&(s.imageOperations=i(s.canvasFactory));var o=s.imageOperations,n=1,u=1;return o.open(t,s.input).then(function(t){return s.width&&s.height&&(n=p(t.width/s.width,t.height/s.height),s.cropWidth=~~(s.width*n),s.cropHeight=~~(s.height*n),s.minScale=p(s.maxScale,d(1/n,s.minScale)),!1!==s.prescale&&((u=p(d(256/t.width,256/t.height),1))<1?(t=o.resample(t,t.width*u,t.height*u),s.cropWidth=~~(s.cropWidth*u),s.cropHeight=~~(s.cropHeight*u),s.boost&&(s.boost=s.boost.map(function(t){return{x:~~(t.x*u),y:~~(t.y*u),width:~~(t.width*u),height:~~(t.height*u),weight:t.weight}}))):u=1)),t}).then(function(t){return o.getData(t).then(function(t){for(var e=function(t,e){var o={},n=new k(e.width,e.height);(function(t,e){for(var o=t.data,n=e.data,i=t.width,r=t.height,a=0;a<r;a++)for(var s=0;s<i;s++){var u,c=4*(a*i+s);u=0===s||i-1<=s||0===a||r-1<=a?w(o,c):4*w(o,c)-w(o,c-4*i)-w(o,c-4)-w(o,c+4)-w(o,c+4*i),n[c+1]=u}})(e,n),function(t,e,o){for(var n=e.data,i=o.data,r=e.width,a=e.height,s=0;s<a;s++)for(var u=0;u<r;u++){var c=4*(s*r+u),d=O(n[c],n[c+1],n[c+2])/255,f=(p=t,m=n[c],v=n[c+1],g=n[c+2],void 0,b=x(m*m+v*v+g*g),w=m/b-p.skinColor[0],y=v/b-p.skinColor[1],k=g/b-p.skinColor[2],1-x(w*w+y*y+k*k)),l=f>t.skinThreshold,h=d>=t.skinBrightnessMin&&d<=t.skinBrightnessMax;i[c]=l&&h?(f-t.skinThreshold)*(255/(1-t.skinThreshold)):0}var p,m,v,g,b,w,y,k}(t,e,n),function(t,e,o){for(var n=e.data,i=o.data,r=e.width,a=e.height,s=0;s<a;s++)for(var u=0;u<r;u++){var c=4*(s*r+u),d=O(n[c],n[c+1],n[c+2])/255,f=y(n[c],n[c+1],n[c+2]),l=f>t.saturationThreshold,h=d>=t.saturationBrightnessMin&&d<=t.saturationBrightnessMax;i[c+2]=h&&l?(f-t.saturationThreshold)*(255/(1-t.saturationThreshold)):0}}(t,e,n),function(t,e){if(!t.boost)return;for(var o=e.data,n=0;n<e.width;n+=4)o[n+3]=0;for(n=0;n<t.boost.length;n++)f(t.boost[n],t,e)}(t,n);for(var i=h(n,t.scoreDownSample),r=-1/0,a=null,s=function(t,e,o){for(var n=[],i=p(e,o),r=t.cropWidth||i,a=t.cropHeight||i,s=t.maxScale;s>=t.minScale;s-=t.scaleStep)for(var u=0;u+a*s<=o;u+=t.step)for(var c=0;c+r*s<=e;c+=t.step)n.push({x:c,y:u,width:r*s,height:a*s});return n}(t,e.width,e.height),u=0,c=s.length;u<c;u++){var d=s[u];d.score=l(t,i,d),d.score.total>r&&(r=(a=d).score.total)}o.topCrop=a,t.debug&&a&&(o.crops=s,o.debugOutput=n,o.debugOptions=t,o.debugTopCrop=g({},o.topCrop));return o}(s,t),o=e.crops||[e.topCrop],n=0,i=o.length;n<i;n++){var r=o[n];r.x=~~(r.x/u),r.y=~~(r.y/u),r.width=~~(r.width/u),r.height=~~(r.height/u)}return a&&a(e),e})})},c.isAvailable=function(t){if(!c.Promise)return!1;if((t?t.canvasFactory:e)===e&&!document.createElement("canvas").getContext("2d"))return!1;return!0},c.importance=m,c.ImgData=k,c._downSample=h,c._canvasImageOperations=i;var p=Math.min,d=Math.max,v=Math.abs,x=Math.sqrt;function g(t){for(var e=1,o=arguments.length;e<o;e++){var n=arguments[e];if(n)for(var i in n)t[i]=n[i]}return t}function b(t){return t=16*((t-1/3+1)%2*.5-.5),Math.max(1-t*t,0)}function O(t,e,o){return.5126*o+.7152*e+.0722*t}function w(t,e){return O(t[e],t[e+1],t[e+2])}function y(t,e,o){var n=d(t/255,e/255,o/255),i=p(t/255,e/255,o/255);if(n===i)return 0;var r=n-i;return.5<(n+i)/2?r/(2-n-i):r/(n+i)}"undefined"!=typeof define&&define.amd&&define(function(){return c}),"undefined"!=typeof exports?exports.smartcrop=c:"undefined"!=typeof navigator&&(window.SmartCrop=window.smartcrop=c),"undefined"!=typeof module&&(module.exports=c)}();